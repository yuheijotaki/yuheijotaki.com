---
title: 'ã€å­¦ç¿’ãƒ¡ãƒ¢ã€‘JavaScriptã‚³ãƒ¼ãƒ‰ãƒ¬ã‚·ãƒ”é›† ãã®10'
description: ''
publishDate: 04/18/2019 09:30:39
---

<p>JavaScriptã‚³ãƒ¼ãƒ‰ãƒ¬ã‚·ãƒ”é›† ã®å­¦ç¿’ãƒ¡ãƒ¢ ç¶šãã§ã™ã€‚</p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4297103680/hatena-blog-22/"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/j/jotaki/20190726/20190726111820.jpg" class="hatena-asin-detail-image" alt="JavaScript ã‚³ãƒ¼ãƒ‰ãƒ¬ã‚·ãƒ”é›†" title="JavaScript ã‚³ãƒ¼ãƒ‰ãƒ¬ã‚·ãƒ”é›†"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4297103680/hatena-blog-22/">JavaScript ã‚³ãƒ¼ãƒ‰ãƒ¬ã‚·ãƒ”é›†</a></p><ul><li><span class="hatena-asin-detail-label">ä½œè€…:</span> æ± ç”°æ³°å»¶,é¹¿é‡å£®</li><li><span class="hatena-asin-detail-label">å‡ºç‰ˆç¤¾/ãƒ¡ãƒ¼ã‚«ãƒ¼:</span> æŠ€è¡“è©•è«–ç¤¾</li><li><span class="hatena-asin-detail-label">ç™ºå£²æ—¥:</span> 2019/01/25</li><li><span class="hatena-asin-detail-label">ãƒ¡ãƒ‡ã‚£ã‚¢:</span> å˜è¡Œæœ¬ï¼ˆã‚½ãƒ•ãƒˆã‚«ãƒãƒ¼ï¼‰</li><li><a href="http://d.hatena.ne.jp/asin/4297103680/hatena-blog-22" target="_blank">ã“ã®å•†å“ã‚’å«ã‚€ãƒ–ãƒ­ã‚°ã‚’è¦‹ã‚‹</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<h2>Chapter10 ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆ</h2>

<h3>181 CSS Transitionsã®çµ‚äº†æ™‚ã«å‡¦ç†ã‚’è¡Œã„ãŸã„</h3>

<p>CSSã® <code>animation</code> ã§ã¯ãªã <code>transition</code> ã®çµ‚äº†ã‚’ç›£è¦–ã™ã‚‹å ´åˆã€<code>transitionend</code> ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç”¨ã„ã‚‹</p>

<pre class="code lang-javascript" data-lang="javascript" data-unlink><span class="synStatement">const</span> item181_rect = <span class="synStatement">document</span>.querySelector(<span class="synConstant">'.item181_rect'</span>);
item181_rect.addEventListener(<span class="synConstant">'transitionend'</span>, (<span class="synStatement">event</span>) =&gt; <span class="synIdentifier">{</span>
  <span class="synComment">// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†æ™‚ã®ã‚³ãƒ¼ãƒ‰</span>
  console.log(<span class="synConstant">'ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®Œäº†ã—ã¾ã—ãŸ'</span>);
<span class="synIdentifier">}</span>);
</pre>

<h3>182 CSS Animationsã®çµ‚äº†æ™‚ã«å‡¦ç†ã‚’è¡Œã„ãŸã„</h3>

<p>CSSã® <code>animation</code> ã‚’ç›£è¦–ã™ã‚‹å ´åˆã¯ã“ã¡ã‚‰<br/>
<code>animationstart</code>, <code>animationiteration</code>, <code>animationend</code> ã‚’ä½¿ã£ã¦ãã‚Œãã‚Œã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒå–ã‚Œã‚‹</p>

<pre class="code lang-css" data-lang="css" data-unlink><span class="synIdentifier">.item182_rect</span> <span class="synIdentifier">{</span>
  <span class="synType">width</span>: <span class="synConstant">40px</span>;
  <span class="synType">height</span>: <span class="synConstant">40px</span>;
  <span class="synType">background</span>: <span class="synConstant">red</span>;
  <span class="synType">animation</span>: infinite <span class="synConstant">1s</span> item<span class="synConstant">182</span>_rotate <span class="synConstant">linear</span>;
<span class="synIdentifier">}</span>

<span class="synComment">@keyframes</span> item182_rotate <span class="synIdentifier">{</span>
  <span class="synConstant">0%</span> <span class="synIdentifier">{</span>
    <span class="synType">transform</span>: <span class="synIdentifier">rotate(</span><span class="synConstant">0deg</span><span class="synIdentifier">)</span>;
  <span class="synIdentifier">}</span>
  <span class="synConstant">100%</span> <span class="synIdentifier">{</span>
    <span class="synType">transform</span>: <span class="synIdentifier">rotate(</span><span class="synConstant">360deg</span><span class="synIdentifier">)</span>;
  <span class="synIdentifier">}</span>
<span class="synIdentifier">}</span>
</pre>

<pre class="code lang-javascript" data-lang="javascript" data-unlink><span class="synStatement">const</span> item182_rect = <span class="synStatement">document</span>.querySelector(<span class="synConstant">'.item182_rect'</span>);
item182_rect.addEventListener(<span class="synConstant">'animationstart'</span>, (<span class="synStatement">event</span>) =&gt; <span class="synIdentifier">{</span>
  <span class="synComment">// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒé–‹å§‹ã—ãŸã¨ãã®ã‚¤ãƒ™ãƒ³ãƒˆ</span>
  console.log(<span class="synConstant">'ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒé–‹å§‹ã—ã¾ã—ãŸã€‚'</span>);
<span class="synIdentifier">}</span>);
item182_rect.addEventListener(<span class="synConstant">'animationiteration'</span>, (<span class="synStatement">event</span>) =&gt; <span class="synIdentifier">{</span>
  <span class="synComment">// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§ç¹°ã‚Šè¿”ã—ãŒç™ºç”Ÿã—ãŸã¨ãã®ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆç¹°ã‚Šè¿”ã—ãŒæœªæŒ‡å®šã®å ´åˆã¯ç™ºç”Ÿã—ãªã„ï¼‰</span>
  console.log(<span class="synConstant">'ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§ç¹°ã‚Šè¿”ã—ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚'</span>);
<span class="synIdentifier">}</span>);
item182_rect.addEventListener(<span class="synConstant">'animationend'</span>, (<span class="synStatement">event</span>) =&gt; <span class="synIdentifier">{</span>
  <span class="synComment">// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®Œäº†ã—ãŸã¨ãã®ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆç¹°ã‚Šè¿”ã—ã‚’æŒ‡å®šã—ãŸå ´åˆã¯ç™ºç”Ÿã—ãªã„ï¼‰</span>
  console.log(<span class="synConstant">'ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®Œäº†ã—ã¾ã—ãŸã€‚'</span>);
<span class="synIdentifier">}</span>);
</pre>

<h3>183 ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ãŸã‚ã®ã€ŒWeb Animations APIã€ã‚’ä½¿ã„ãŸã„</h3>

<blockquote><p>Web Animations API ã ã¨ JavaScript ã ã‘ã§ç®¡ç†ã§ãã€çµ‚äº†æ™‚ã®åˆ¤å®šã‚’ã—ã‚„ã™ã„ã¨ã„ã†ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚<br/>
ç¬¬ä¸€å¼•æ•°ã«ã¯é–‹å§‹å€¤ã¨çµ‚äº†å€¤ã‚’å«ã‚€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã€ç¬¬äºŒå¼•æ•°ã«ã¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®å±æ€§ã‚’å«ã‚€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒ‡å®šã—ã¾ã™ã€‚</p></blockquote>

<p>â€» Edge ã¯ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ã®ã§ä½¿ç”¨ã™ã‚‹ã«ã¯ Polyfill ãŒå¿…è¦ <a href="https://caniuse.com/#feat=web-animation">https://caniuse.com/#feat=web-animation</a><br/>
å‚è€ƒï¼š<a href="https://qiita.com/mizchi/items/4def48e2467ae2b04da3">Web Animations API ã‚’ä½¿ã£ã¦ã¿ã‚‹ - Qiita</a></p>

<pre class="code lang-javascript" data-lang="javascript" data-unlink><span class="synComment">// è¦ç´ ã‚’å–å¾—</span>
<span class="synStatement">const</span> item183_rect = <span class="synStatement">document</span>.querySelector(<span class="synConstant">'.item183_rect'</span>);
item183_rect.animate(
  <span class="synIdentifier">{</span>
    transform: <span class="synIdentifier">[</span>
      <span class="synConstant">'translate(0px) rotate(0deg)'</span>,    <span class="synComment">// é–‹å§‹å€¤</span>
      <span class="synConstant">'translate(200px) rotate(360deg)'</span> <span class="synComment">// çµ‚äº†å€¤</span>
    <span class="synIdentifier">]</span>
  <span class="synIdentifier">}</span>,
  <span class="synIdentifier">{</span>
    duration: 3000,       <span class="synComment">// ãƒŸãƒªç§’æŒ‡å®š</span>
    iterations: Infinity, <span class="synComment">// ç¹°ã‚Šè¿”ã—å›æ•°</span>
    direction: <span class="synConstant">'normal'</span>,  <span class="synComment">// ç¹°ã‚Šè¿”ã—æŒ™å‹•</span>
    easing: <span class="synConstant">'ease'</span>        <span class="synComment">// ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°</span>
  <span class="synIdentifier">}</span>
);
</pre>

<ul>
<li>184 è¦ç´ ã®å¤§ãã•ã‚’å¤‰ãˆãŸã„</li>
<li>185 è¦ç´ ã‚’ç§»å‹•ã•ã›ãŸã„</li>
<li>186 è¦ç´ ã®é€æ˜åº¦ã‚’å¤‰åŒ–ã•ã›ãŸã„</li>
<li>187 è¦ç´ ã®æ˜åº¦ã‚’å¤‰åŒ–ã•ã›ãŸã„</li>
<li>188 è¦ç´ ã®å½©åº¦ã‚’å¤‰åŒ–ã•ã›ãŸã„</li>
</ul>

<p>ã‚ãŸã‚Šã¯CSSã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ä¸Šè¨˜ãŒåˆ†ã‹ã£ã¦ã‚Œã°å¤§ä¸ˆå¤«ãã†ãªã®ã§ã‚¹ã‚­ãƒƒãƒ—</p>

<h3>189 <code>requestAnimationFrame()</code> ã‚’ä½¿ã„ãŸã„</h3>

<blockquote><p>æ™‚é–“çµŒéã§å¤‰åŒ–ã—ç¶šã‘ã‚‹ã«ã¯ <code>requestAnimationFrame()</code> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚<code>requestAnimationFrame()</code> ãƒ¡ã‚½ãƒƒãƒ‰ã¯å†æç”»ã®å‰ã«é–¢æ•°ã®å‘¼ã³å‡ºã—ã‚’è¦æ±‚ã™ã‚‹å‘½ä»¤ã§ã™ã€‚</p>

<p>ã‚¦ã‚§ãƒ–ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ <code>requestAnimationFrame()</code> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã®ãŒã€ã‚‚ã£ã¨ã‚‚ãƒ ãƒ€ãŒãªããªã‚ã‚‰ã‹ã«è¦‹ã›ã‚‰ã‚Œã¾ã™ã€‚</p>

<p><code>requestAnimationFrame()</code> ãƒ¡ã‚½ãƒƒãƒ‰ã¯ä¸€åº¦ã—ã‹å‘¼ã³å‡ºã•ã‚Œã¾ã›ã‚“ã€‚ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã™ã‚‹ã«ã¯é€£ç¶šã—ã¦å‘¼ã³å‡ºã™å¿…è¦ãŒã‚ã‚‹ã®ã§ã€é–¢æ•°ã®ãªã‹ã§è‡ªèº«ã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã‚ˆã†ã«äºˆç´„ã—ã¦ãŠãã¾ã™ã€‚</p></blockquote>

<pre class="code lang-javascript" data-lang="javascript" data-unlink>tick();
<span class="synIdentifier">function</span> tick() <span class="synIdentifier">{</span>
  requestAnimationFrame(tick);
  <span class="synComment">// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†ã‚’è¨˜è¿°ã™ã‚‹</span>
<span class="synIdentifier">}</span>
</pre>

<p>é–¢æ•°ã‚’æ­¢ã‚ãŸã„å ´åˆã¯</p>

<ul>
<li><code>requestAnimationFrame()</code> ã®å‘¼ã³å‡ºã—ã‚’ã—ãªã„</li>
<li><code>cancelAnimationFrame()</code> ã‚’ä½¿ã£ã¦ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹</li>
</ul>

<pre class="code lang-javascript" data-lang="javascript" data-unlink>tick();
<span class="synIdentifier">let</span> requestID;
<span class="synIdentifier">function</span> tick() <span class="synIdentifier">{</span>
  requestID = requestAnimationFrame(tick);
  <span class="synComment">// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†ã‚’è¨˜è¿°ã™ã‚‹</span>
<span class="synIdentifier">}</span>
cancelAnimationFrame(requestID);
</pre>

<h3>190 <code>requestAnimationFrame()</code> ã§HTMLè¦ç´ ã‚’å‹•ã‹ã—ãŸã„</h3>

<p>ã“ã‚Œã¯ <code>style</code> å½“ã¦ã‚‹å½¢ã®ä¾‹ã§ã™ãŒã€<code>requestAnimationFrame()</code> ã¯ WebGL ã‚„ Canvas å‹•ã‹ã™å ´é¢ã§ä¸»ã«ä½¿ã†ãã†</p>

<p>CSSã® <code>will-change</code> ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã˜ã‚ã¦ã¿ã¾ã—ãŸãŒã€ãŠã¾ã˜ãªã„çš„ãªæ„å‘³åˆã„ã ãã†ã§ã‚ã¾ã‚Šæ°—ã«ã—ãªãã¦è‰¯ã„ã®ã‹ãªã¨<br/>
å‚è€ƒï¼š<a href="https://qiita.com/damele0n/items/71352757d0e6fdf5b184">CSS: will-changeæŒ‡å®šæ™‚ã®æŒ™å‹•, ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿ã¨è€ƒå¯Ÿ - Qiita</a></p>

<pre class="code lang-html" data-lang="html" data-unlink><span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;item190_stoker&quot;</span><span class="synIdentifier">&gt;</span>ğŸ‘»<span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
</pre>

<pre class="code lang-css" data-lang="css" data-unlink><span class="synIdentifier">.item190_stoker</span> <span class="synIdentifier">{</span>
  <span class="synType">position</span>: <span class="synConstant">fixed</span>;
  <span class="synType">top</span>: <span class="synConstant">0</span>;
  <span class="synType">left</span>: <span class="synConstant">0</span>;
  will-change: transform;
  <span class="synType">font-size</span>: <span class="synConstant">5rem</span>;
<span class="synIdentifier">}</span>
</pre>

<pre class="code lang-javascript" data-lang="javascript" data-unlink><span class="synComment">// ãƒã‚¦ã‚¹ã‚¹ãƒˆãƒ¼ã‚«ãƒ¼ã®è¦ç´ ã‚’å–å¾—</span>
<span class="synStatement">const</span> item190_stoker = <span class="synStatement">document</span>.querySelector(<span class="synConstant">'.item190_stoker'</span>);

<span class="synComment">// ãƒã‚¦ã‚¹åº§æ¨™</span>
<span class="synIdentifier">let</span> mouseX = 0;
<span class="synIdentifier">let</span> mouseY = 0;
<span class="synComment">// ã‚¹ãƒˆãƒ¼ã‚«ãƒ¼ã®åº§æ¨™</span>
<span class="synIdentifier">let</span> currentX = 0;
<span class="synIdentifier">let</span> currentY = 0;
<span class="synComment">// ãƒã‚¦ã‚¹ç§»å‹•æ™‚</span>
<span class="synStatement">document</span>.body.addEventListener(<span class="synConstant">'mousemove'</span>, (<span class="synStatement">event</span>) =&gt; <span class="synIdentifier">{</span>
  <span class="synComment">// ãƒã‚¦ã‚¹åº§æ¨™ã‚’ä¿å­˜</span>
  mouseX = <span class="synStatement">event</span>.clientX;
  mouseY = <span class="synStatement">event</span>.clientY;
<span class="synIdentifier">}</span>);

item190_tick();
<span class="synIdentifier">function</span> item190_tick() <span class="synIdentifier">{</span>
  <span class="synComment">// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’æŒ‡å®š</span>
  requestAnimationFrame(item190_tick);

  <span class="synComment">// ãƒã‚¦ã‚¹åº§æ¨™ã‚’é…å»¶ã—ã¦ã‚¹ãƒˆãƒ¼ã‚«ãƒ¼ã®åº§æ¨™ã¸åæ˜ ã™ã‚‹</span>
  currentX += (mouseX - currentX) * 0.1;
  currentY += (mouseY - currentY) * 0.1;

  <span class="synComment">// ã‚¹ãƒˆãƒ¼ã‚«ãƒ¼ã®è¦ç´ ã¸åæ˜ </span>
  item190_stoker.style.transform = `translate($<span class="synIdentifier">{</span>currentX<span class="synIdentifier">}</span>px, $<span class="synIdentifier">{</span>currentY<span class="synIdentifier">}</span>px)`;
<span class="synIdentifier">}</span>
</pre>

<hr />

<p>JavaScript å´ã§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã•ã›ã‚‹ï¼ˆCSSçš„ãªè¦ç´ ã‚’æŒ‡å®šã™ã‚‹ï¼‰ã®ã¯ãªã‚“ã‹å¥½ã‹ãªã„ã®ã§ã™ãŒã€ã‚„ã‚Šæ–¹ã‚„ã§ãã‚‹ã“ã¨çŸ¥ã£ã¦ãŠã“ã†ã¨æ€ã„ã¾ã—ãŸã€‚</p>
